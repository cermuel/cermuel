
'use strict'

let parser = require('htmlparser2')
let arr = require('array-iterator')

exports.parse = parse
exports.traverse = traverse

function parse (str, opts) {
  let tree = parser.parseDOM(str, opts)
  return tree
}

function traverse (tree, fn) {
  if (!tree.length) return;

  for (let node of arr(tree)) {
    if (node.name) fn(node);
    let child = node.children
    if(!child) return;
    traverse(child, fn)
  }
}